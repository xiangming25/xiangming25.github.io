---
layout: post
title: 如何修改node_modules包源码
categories: [npm]
description: node_modules源码修改方式
keywords: node_modules, modify, 源码修改
---

修改源码的方式有许多种，如何在不影响以前 `commit` 的基础上，对源码进行修改，以方便对修改位置的追踪，以及后续版本升级

## 无私有仓库

### 方法一

1. 将仓库 `fork` 到自己的 `github` 中
2. 将项目 `clone` 到本地
```
git clone https://github.com/xiangming25/react-native-modalbox.git
```
3. 修改源码
![修改的源码](/assets/images/2019/09/20190919221931.png)
4. `push` 到自己的远端仓库
```
git push
```
5. 向 `fork` 的源仓库提交MR
6. 等待管理员员合并并发布到 `npm` 上
7. 更新 `package.json`中对应的版本号
8. 重新 `yarn`

### 方法二

1. 将仓库 `fork` 到自己的 `github` 中
2. 将项目 `clone` 到本地
```
git clone https://github.com/xiangming25/react-native-modalbox.git
```
3. 修改源码
![修改的源码](/assets/images/2019/09/20190919221931.png)
4. `push` 到自己的远端仓库
5. 更新 `package.json`中包对应的地址
```
"dependencies": {
    "react-native-modalbox": "git+https://github.com/xiangming25/react-native-modalbox.git"
 }
```
6. 重新 `yarn`

## 有私有仓库

1. 直接将仓库 clone 到本地
```
git clone https://github.com/maxs15/react-native-modalbox.git
```
2. 在私有仓库中创建与要修改的项目同名仓库
![创建同名仓库](/assets/images/2019/09/20190919224111.png)
3. 修改clone项目的remote地址
```
>> cd react-native-modalbox
>> git remote set-url origin https://github.com/xiangming25/react-native-modalbox.git
```
![重新设置remote url](/assets/images/2019/09/20190919224403.png)
4. 修改源码
![修改的源码](/assets/images/2019/09/20190919221931.png)
5. 修改 `package.json` 中的版本号，version的第一个值尽量写大一点，防止版本更新后，版本冲突
![修改version](/assets/images/2019/09/20190919223223.png)
5. `push` 到在在远端
6. `npm publish`
7. 修改引入项目中 `package.json` 对应包的版本
![修改package中对应的version](/assets/images/2019/09/20190919223636.png)
8. 重新 `yarn`